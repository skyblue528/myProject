/**
 * Created by jkyaw on 8/22/15.
 */

var ShoppingItem = Backbone.Model.extend({});
/* page1*/
var  bracelet = new ShoppingItem({
    "id": 1,
    "title": "Bracelet",
    "price": 3.99,
    "image_url": "/images/crystal.jpg"
});

var necklace1 = new ShoppingItem({
    "id": 2,
    "title": "Necklace",
    "price": 8.99,
    "image_url": "/images/longNecklace.jpg"
});

var hairTies = new ShoppingItem({
    "id": 3,
    "title": "Hair Ties",
    "price": 6.99,
    "image_url": "/images/hairTies.jpg"
});

/*1*/

var necklace2 = new ShoppingItem({
    "id": 4,
    "title": "Necklace",
    "price": 5.99,
    "image_url": "/images/necklace.jpg"
});

var hairTies2= new ShoppingItem({
    "id": 5,
    "title": "Hair Ties",
    "price": 3.99,
    "image_url": "/images/hairTies2.jpg"
});

var bracelet2 = new ShoppingItem({
    "id": 6,
    "title": "Bracelet",
    "price": 8.99,
    "image_url": "/images/bracelet1.jpg"
});
/*1*/

var bracelet3 = new ShoppingItem({
    "id": 7,
    "title": "Bracelet",
    "price": 8.99,
    "image_url": "/images/bracelet2.jpg"
});

var keychain1 = new ShoppingItem({
    "id": 8,
    "title": "Key Chain",
    "price": 3.99,
    "image_url": "/images/keyChain1.jpg"
});
var earing1 = new ShoppingItem({
    "id": 9,
    "title": "Earing",
    "price": 3.99,
    "image_url": "/images/earing1.jpg"
});

/*page2*/
var bracelet4 = new ShoppingItem({
    "id": 10,
    "title": "Bracelet",
    "price": 19.99,
    "image_url": "/images/bracelet3.jpg"
});

var bracelet5 = new ShoppingItem({
    "id": 11,
    "title": "Bracelet",
    "price": 8.99,
    "image_url": "/images/bracelet4.jpg"
});
var necklace3 = new ShoppingItem({
    "id": 12,
    "title": "Necklace",
    "price": 19.99,
    "image_url": "/images/necklace1.jpg"
});

/*2*/
var dollKeychain = new ShoppingItem({
    "id": 13,
    "title": "Key Chain",
    "price": 14.99,
    "image_url": "/images/necklace1.jpg"
});

var dollKeychain2 = new ShoppingItem({
    "id": 14,
    "title": "Key Chain",
    "price": 14.99,
    "image_url": "/images/dollKeyChain2.jpg"
});
var keychain2 = new ShoppingItem({
    "id": 15,
    "title": "Key Chain",
    "price": 5.99,
    "image_url": "/images/keyChain2.jpg"
});

/*2*/
var dollKeychain3 = new ShoppingItem({
    "id": 16,
    "title": "Key Chain",
    "price": 8.99,
    "image_url": "/images/dollKeyChain3.jpg"
});

var bracelet6 = new ShoppingItem({
    "id": 17,
    "title": "Crystal Bracelet",
    "price": 5.75,
    "image_url": "/images/bracelet5.jpg"
});

var pin1 = new ShoppingItem({
    "id": 18,
    "title": "Pink pin",
    "price": 7.99,
    "image_url": "/images/img37.jpg"
});

/*              page3               */
var keychain3 = new ShoppingItem({
    "id": 19,
    "title": "Doll Keychain",
    "price": 6.99,
    "image_url": "/images/img19.jpg"
});

var keychain4 = new ShoppingItem({
    "id": 20,
    "title": "Keychain",
    "price": 3.99,
    "image_url": "/images/img20.jpg"
});

var pin2 = new ShoppingItem({
    "id": 21,
    "title": "Guitar Pin",
    "price": 9.99,
    "image_url": "/images/img21.jpg"
});

/*3,2*/
var pin3 = new ShoppingItem({
    "id": 22,
    "title": "Pin",
    "price": 19.99,
    "image_url": "/images/img22.jpg"
});
var pin4 = new ShoppingItem({
    "id": 23,
    "title": "Hair pin",
    "price": 4.99,
    "image_url": "/images/img23.jpg"
});
var ring1 = new ShoppingItem({
    "id": 24,
    "title": "Ring",
    "price": 15.99,
    "image_url": "/images/img24.jpg"
});

/*3,3*/
var keychain5 = new ShoppingItem({
    "id": 25,
    "title": "Keychain",
    "price": 3.99,
    "image_url": "/images/img25.jpg"
});
var keychain6 = new ShoppingItem({
    "id": 26,
    "title": "Keychain",
    "price": 4.99,
    "image_url": "/images/img26.jpg"
});
var keychain7 = new ShoppingItem({
    "id": 27,
    "title": "Keychain",
    "price": 6.99,
    "image_url": "/images/img27.jpg"
});

/*      Page4*/
var pin5 = new ShoppingItem({
    "id": 28,
    "title": "Pin",
    "price": 15.99,
    "image_url": "/images/img28.jpg"
});
var keychain8 = new ShoppingItem({
    "id": 29,
    "title": "Keychain",
    "price": 4.99,
    "image_url": "/images/img29.jpg"
});
var necklace4 = new ShoppingItem({
    "id": 30,
    "title": "Long Necklace",
    "price": 6.99,
    "image_url": "/images/img30.jpg"
});

/*4,2*/
var keychain9 = new ShoppingItem({
    "id": 31,
    "title": "Angry Bird Keychain",
    "price": 3.99,
    "image_url": "/images/img31.jpg"
});
var earing2 = new ShoppingItem({
    "id": 32,
    "title": "Blue Earing",
    "price": 3.99,
    "image_url": "/images/img32.jpg"
});
var earing3 = new ShoppingItem({
    "id": 33,
    "title": "Red Earing",
    "price": 3.99,
    "image_url": "/images/img33.jpg"
});

/*4*/

var necklace5 = new ShoppingItem({
    "id": 34,
    "title": "Long Green Necklace",
    "price": 7.99,
    "image_url": "/images/img34.jpg"
});
var pin6 = new ShoppingItem({
    "id": 35,
    "title": "Pink Butterfly Pin",
    "price": 12.99,
    "image_url": "/images/img35.jpg"
});
var pin7 = new ShoppingItem({
    "id": 36,
    "title": "Pin",
    "price": 11.99,
    "image_url": "/images/img36.jpg"
});


var ShoppingItemView = Backbone.View.extend({
    className : 'col-md-4',
    render:function(){
        var source   = $("#item-template").html();
        var template = Handlebars.compile(source);
        var html     = template(this.model.toJSON());
        $(this.el).html(html);
    }
});

/* page 1*/
function shopping(model,className){
    var shoppingItemView = new ShoppingItemView({model: model});
    shoppingItemView.render();
    $(className).append(shoppingItemView.el);
}

var pages = [
    [bracelet, necklace1, hairTies, necklace2, hairTies2, bracelet2, bracelet3, keychain1, earing1],
    [bracelet4, bracelet5, necklace3, dollKeychain, dollKeychain2, keychain2, dollKeychain3, bracelet6, pin1],
    [keychain3, keychain4, pin2, pin3, pin4, ring1, keychain5, keychain6, keychain7],
    [pin5, keychain8, necklace4, keychain9, earing2, earing3, necklace5, pin6, pin7]
];

function loadItems(pageIndex) {
    $('.row').html('');
    for (var j = 0; j < pages[pageIndex].length; j++) {
        shopping(pages[pageIndex][j], '.row');
    }
}

var main= function(){
    $('.dropdown-toggle').click(function(){
        $('.dropdown-menu').toggle();
    });

    $('.arrow-next').click(function(){
        var currentDot = $('.active-dot');
        var nextDot = currentDot.next();

        if(nextDot.length == 0){
            nextDot = $('.dot').first();
        }

        var currentPage = nextDot.index();
        loadItems(currentPage);

        currentDot.removeClass('active-dot');
        nextDot.addClass('active-dot');
    });

    $('.arrow-prev').click(function(){
        var currentDot = $('.active-dot');
        var prevDot = currentDot.prev();

        if(prevDot.length == 0) {
            prevDot = $('.dot').last();
        }

        var currentPage = prevDot.index();
        loadItems(currentPage);

        currentDot.removeClass('active-dot');
        prevDot.addClass('active-dot');
    });

    loadItems(0);
};


$(document).ready(main);

