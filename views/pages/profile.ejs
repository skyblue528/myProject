<html>
    <head>
        <% include ../partials/header.ejs %>
        <style>
            .bigContainer{
                margin:0 auto 0 auto;
                width:570px;
                height:330px;
            }
            .p1{
                margin: 5px 0 5px 70px;
                width: 50px;
            }
            .p1Container{
                float:left;
                width: 220px;
                height:320px;
            }
            .p2 {
                margin: 5px 0 5px 70px;
                width: 50px;
            }
            .p2Container{
                float: left;
                margin-left:120px;
                width: 220px;
                height:320px;
            }
            .files{
                margin-bottom: 10px;
            }
            .imgContainer{
                width:900px;
                height: 230px;
                margin: 0 auto 10px auto;
            }

            .selected {
                display: inline-block;
                border: 3px solid blue;
            }
            .boxes{
                width: 200px;
                height:350px;
            }

        </style>
    </head>
    <body>
        <% include ../partials/nav.ejs %>
        <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                <li data-target="#carousel-example-generic" data-slide-to="2"></li>
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">
                <div class="item active">
                    <div class="boxes"></div>

                    <div class="carousel-caption">
                        <img src="/images/hellokitty1.png" alt="hellokitty1">
                    </div>
                </div>
                <div class="item">
                    <div class="boxes"></div>

                    <div class="carousel-caption">
                        <img src="/images/helloKitty2.png" alt="helloKitty2">
                    </div>
                </div>
                <div class="item">
                    <div class="boxes"></div>
                    <div class="carousel-caption">
                        <img src="/images/helloKitty3.png" alt="helloKitty3">
                    </div>
                </div>
                <div class="item">
                    <div class="boxes"></div>
                    <div class="carousel-caption">
                        <img src="/images/minion.png" alt="minion">
                    </div>
                </div>
                <div class="item">
                    <div class="boxes"></div>
                    <div class="carousel-caption">
                        <img src="/images/minion2.png" alt="minion2">
                    </div>
                </div>
                ...
            </div>

            <!-- Controls -->
            <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

        <!-- <div class="imgContainer">
            <span><a href="/profile?name=hellokitty1.png"><img src="/images/hellokitty1.png"/></a></span>
            <span><a href="/profile?name=helloKitty2.png"><img src="/images/helloKitty2.png"/></a></span>
            <span><a href="/profile?name=helloKitty3.png"><img src="/images/helloKitty3.png"/></a></span>
            <span><a href="/profile?name=minion.png"><img src="/images/minion.png"/></a></span>
            <span><a href="/profile?name=minion2.png"><img src="/images/minion2.png"/></a></span>
        </div> -->

        <div class="bigContainer">
        <div class="p1Container"><div class="p1">Player1</div>
            <img src="/images/m1.png"/>
            <form id      =  "uploadForm"
                  enctype   =  "multipart/form-data"
                  action    =  "/api/photo/player1"
                  method    =  "post">
                <div class="files"></div>
                <input type="file" name="userPhoto" />
                <div class="files"></div>
                <input type="submit" class="btn btn-default" value="Upload Image" name="submit">
                <button id='player1' type="button" class="btn btn-primary" data-toggle="modal" data-target=".modal1">Select</button>
                <div class="modal1 modal fade" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                                <span><a onclick="return false;" href="/profile?name=hellokitty1.png&player=1"><img src="/images/hellokitty1.png"/></a></span>
                                <span><a onclick="return false;" href="/profile?name=helloKitty2.png&player=1"><img src="/images/helloKitty2.png"/></a></span>
                                <span><a onclick="return false;" href="/profile?name=helloKitty3.png&player=1"><img src="/images/helloKitty3.png"/></a></span>
                                <span><a onclick="return false;" href="/profile?name=minion.png&player=1"><img src="/images/minion.png"/></a></span>
                                <span><a onclick="return false;" href="/profile?name=minion2.png&player=1"><img src="/images/minion2.png"/></a></span>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <input id="saveP1" type="submit" class="btn btn-default" value="Save changes" name="submit">
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
        </form>
        </div>

        <div class="p2Container"><div class="p2">Player2</div>
            <img src="/images/m2.png"/>
            <form id      =  "uploadForm"
                  enctype   =  "multipart/form-data"
                  action    =  "/api/photo/player2"
                  method    =  "post">
                <div class="files"></div>
                <input type="file" name="userPhoto" />
                <div class="files"></div>
                <input type="submit" class="btn btn-default" value="Upload Image" name="submit">
                <button id='player2' type="button" class="btn btn-primary" data-toggle="modal" data-target=".modal2">Select</button>
                <div class="modal2 modal fade" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <span><a onclick="return false;" href="/profile?name=hellokitty1.png&player=2"><img src="/images/hellokitty1.png"/></a></span>
                            <span><a onclick="return false;" href="/profile?name=helloKitty2.png&player=2"><img src="/images/helloKitty2.png"/></a></span>
                            <span><a onclick="return false;" href="/profile?name=helloKitty3.png&player=2"><img src="/images/helloKitty3.png"/></a></span>
                            <span><a onclick="return false;" href="/profile?name=minion.png&player=2"><img src="/images/minion.png"/></a></span>
                            <span><a onclick="return false;" href="/profile?name=minion2.png&player=2"><img src="/images/minion2.png"/></a></span>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <input id="saveP2" type="submit" class="btn btn-default" value="Save changes" name="submit">
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
            </form>
        </div>
        </div>
    </body>
    <script>
        var selectedUrl = null;
        $('.modal-content a').on('click', function(){
            selectedUrl = ($(this).attr('href'));
            $('.modal-content a').removeClass('selected');
            $(this).addClass('selected');
            console.log(selectedUrl);
        })

        $('#saveP1').on('click',function(){
            console.log("selectedUrl: " +selectedUrl);

           /* var hash = {
                url :selectedUrl,
                success : function(){
                    window.location.reload();
                }
            }  */

            var hash = {} // hash map
            hash.url = selectedUrl
            hash.success = function(){
                window.location.reload();
            }
            console.log("hello")

            $.ajax(hash);
        });

        var selectedP2Url = null;
        $('.modal-content a').on('click',function(){
            selectedP2Url = $(this).attr('href')
            $('.modal-content a').removeClass('selected');
            $(this).addClass('selected');

        })

        $('#saveP2').on('click', function(){
            $.ajax({
                url: selectedP2Url,
                success: function(){
                    window.location.reload();
                }
            })
        });
    </script>
</html>